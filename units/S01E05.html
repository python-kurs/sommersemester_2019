<!DOCTYPE html>
<html lang="en">
  

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,minimum-scale=1">

  <title>Data science II</title>
  <meta name="description" content="">

  <link rel="canonical" href="https://python-kurs.github.io/sommersemester_2019//units/S01E05.html">
  <link rel="alternate" type="application/rss+xml" title="Sommersemester 2019" href="https://python-kurs.github.io/sommersemester_2019//feed.xml">

  <meta property="og:url"         content="https://python-kurs.github.io/sommersemester_2019//units/S01E05.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Data science II" />
<meta property="og:description" content="" />
<meta property="og:image"       content="" />


  <script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "NewsArticle",
  "mainEntityOfPage":
    "https://python-kurs.github.io/sommersemester_2019//units/S01E05.html",
  "headline":
    "Data science II",
  "datePublished":
    "2019-07-02T17:04:16+00:00",
  "dateModified":
    "2019-07-02T17:04:16+00:00",
  "description":
    "",
  "author": {
    "@type": "Person",
    "name": "Sebastian Egli, Benjamin Rösner"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Data 100 at UC Berkeley",
    "logo": {
      "@type": "ImageObject",
      "url": "https://python-kurs.github.io/sommersemester_2019/",
      "width": 60,
      "height": 60
    }
  },
  "image": {
    "@type": "ImageObject",
    "url": "https://python-kurs.github.io/sommersemester_2019/",
    "height": 60,
    "width": 60
  }
}

  </script>
  <link rel="stylesheet" href="/sommersemester_2019/assets/css/styles.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css ">
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">

  <!-- <link rel="manifest" href="/manifest.json"> -->
  <!-- <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#efae0a"> -->
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="theme-color" content="#233947">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="/sommersemester_2019/images/logo/favicon.ico">

  <!-- MathJax Config -->
  <!-- Allow inline math using $ and automatically break long math lines -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true,
        processEnvironments: true
    },
    CommonHTML: {
        linebreaks: {
            automatic: true,
        },
    },
});
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML' async></script>

  <!-- DOM updating function -->
  <script>
const runWhenDOMLoaded = cb => {
  if (document.readyState != 'loading') {
    cb()
  } else if (document.addEventListener) {
    document.addEventListener('DOMContentLoaded', cb)
  } else {
    document.attachEvent('onreadystatechange', function() {
      if (document.readyState == 'complete') cb()
    })
  }
}

// Helper function to init things quickly
initFunction = function(myfunc) {
  runWhenDOMLoaded(myfunc);
  document.addEventListener('turbolinks:load', myfunc);
};
</script>

  <!-- Define some javascript variables that will be useful in other javascript -->
  <script>
    const site_basename = '/sommersemester_2019/';
  </script>

  <!-- Add AnchorJS to let headers be linked -->
  <script src="/sommersemester_2019/assets/js/anchor.min.js"  type="text/javascript"></script>
  <script>

initFunction(function () {
    anchors.add("main h1, main h2, main h3, main h4")
});

</script>

  <!-- Include Turbolinks to make page loads fast -->
  <!-- https://github.com/turbolinks/turbolinks -->
  <script src="/sommersemester_2019/assets/js/turbolinks.js" async></script>
  <meta name="turbolinks-cache-control" content="no-cache">

  <!-- Load nbinteract for widgets -->
  <script src="https://unpkg.com/nbinteract-core" async></script>

  <!-- Load Thebelab for interactive widgets -->
  <!-- Include Thebelab for interactive code if it's enabled -->

<script type="text/x-thebe-config">
    {
      requestKernel: true,
      binderOptions: {
        repo: 'YOUR-ORG/YOUR-REPO',
        ref: 'master',
      },
      kernelOptions: {
        name: 'python3',
      }
    }
</script>
<script src="https://unpkg.com/thebelab@0.3.3/lib/index.js"></script>
<script>
    /**
     * Add attributes to Thebelab blocks
     */

    const initThebelab = () => {
        const addThebelabToCodeCells = () => {
            console.log("Adding thebelab to code cells...");
            // If Thebelab hasn't loaded, wait a bit and try again. This
            // happens because we load ClipboardJS asynchronously.
            if (window.thebelab === undefined) {
                setTimeout(addThebelabToCodeCells, 250)
            return
            }

            // If we already detect a Thebelab cell, don't re-run
            if (document.querySelectorAll('div.thebelab-cell').length > 0) {
                return;
            }

            // Find all code cells, replace with Thebelab interactive code cells
            const codeCells = document.querySelectorAll('.input_area pre')
            codeCells.forEach((codeCell, index) => {
                const id = codeCellId(index)
                codeCell.setAttribute('data-executable', 'true')

                // Figure out the language it uses and add this too
                var parentDiv = codeCell.parentElement.parentElement;
                var arrayLength = parentDiv.classList.length;
                for (var ii = 0; ii < arrayLength; ii++) {
                    var parts = parentDiv.classList[ii].split('language-');
                    if (parts.length === 2) {
                        // If found, assign dataLanguage and break the loop
                        var dataLanguage = parts[1];
                        break;
                    }
                }
                codeCell.setAttribute('data-language', dataLanguage)

                // If the code cell is hidden, show it
                var inputCheckbox = document.querySelector(`input#hidebtn${codeCell.id}`);
                if (inputCheckbox !== null) {
                    setCodeCellVisibility(inputCheckbox, 'visible');
                }
            });

            // Remove the event listener from the page so keyboard press doesn't
            // Change page
            document.removeEventListener('keydown', initPageNav)
            keyboardListener = false;

            // Init thebelab
            thebelab.bootstrap();

            // Remove copy buttons since they won't work anymore
            const copyButtons = document.querySelectorAll('.copybtn')
            copyButtons.forEach((copyButton, index) => {
                copyButton.remove();
            });

            // Remove outputs since they'll be stale
            const outputs = document.querySelectorAll('.output *, .output')
            outputs.forEach((output, index) => {
                output.remove();
            });
        }

        // Add event listener for the function to modify code cells
        const thebelabButton = document.getElementById('interact-button-thebelab');
        if (thebelabButton === null) {
            setTimeout(initThebelab, 250)
        return
        };
        thebelabButton.addEventListener('click', addThebelabToCodeCells);
    }

    // Initialize Thebelab
    initFunction(initThebelab);
</script>


  <!-- Google analytics -->
  <script src="/sommersemester_2019/assets/js/ga.js" async></script>

  <!-- Clipboard copy button -->
  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" async></script>

  <!-- Load JS that depends on site variables -->
  <script>
/**
 * Set up copy/paste for code blocks
 */
const codeCellId = index => `codecell${index}`

const clipboardButton = id =>
  `<a class="btn copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#${id}">
    <img src="/sommersemester_2019/assets/images/copy-button.svg" alt="Copy to clipboard">
  </a>`

// Clears selected text since ClipboardJS will select the text when copying
const clearSelection = () => {
  if (window.getSelection) {
    window.getSelection().removeAllRanges()
  } else if (document.selection) {
    document.selection.empty()
  }
}

// Changes tooltip text for two seconds, then changes it back
const temporarilyChangeTooltip = (el, newText) => {
  const oldText = el.getAttribute('data-tooltip')
  el.setAttribute('data-tooltip', newText)
  setTimeout(() => el.setAttribute('data-tooltip', oldText), 2000)
}

const addCopyButtonToCodeCells = () => {
  // If ClipboardJS hasn't loaded, wait a bit and try again. This
  // happens because we load ClipboardJS asynchronously.
  if (window.ClipboardJS === undefined) {
    setTimeout(addCopyButtonToCodeCells, 250)
    return
  }

  const codeCells = document.querySelectorAll('div.highlighter-rouge:not(.output) pre')
  codeCells.forEach((codeCell, index) => {
    const id = codeCellId(index)
    codeCell.setAttribute('id', id)
    if (document.querySelector(`pre#${id} + a`) == null) {
      codeCell.insertAdjacentHTML('afterend', clipboardButton(id));
    }
  })

  const clipboard = new ClipboardJS('.copybtn')
  clipboard.on('success', event => {
    clearSelection()
    temporarilyChangeTooltip(event.trigger, 'Copied!')
  })

  clipboard.on('error', event => {
    temporarilyChangeTooltip(event.trigger, 'Failed to copy')
  })

  // Get rid of clipboard before the next page visit to avoid memory leak
  document.addEventListener('turbolinks:before-visit', () =>
    clipboard.destroy()
  )
}

initFunction(addCopyButtonToCodeCells);
</script>

  <!-- Hide cell code -->
  
<script>
/**
Add buttons to hide code cells
*/


var setCodeCellVisibility = function(inputField, kind) {
    // Update the image and class for hidden
    var id = inputField.getAttribute('data-id');
    var codeCell = document.querySelector(`#${id}`);

    if (kind === "visible") {
        codeCell.classList.remove('hidden');
        inputField.checked = true;
    } else {
        codeCell.classList.add('hidden');
        inputField.checked = false;
    }
}

var toggleCodeCellVisibility = function (event) {
    // The label is clicked, and now we decide what to do based on the input field's clicked status
    if (event.target.tagName === "LABEL") {
        var inputField = event.target.previousElementSibling;
    } else {
        // It is the span inside the target
        var inputField = event.target.parentElement.previousElementSibling;
    }

    if (inputField.checked === true) {
        setCodeCellVisibility(inputField, "visible");
    } else {
        setCodeCellVisibility(inputField, "hidden");
    }
}


// Button constructor
const hideCodeButton = id => `<input class="hidebtn" type="checkbox" id="hidebtn${id}" data-id="${id}"><label title="Toggle cell" for="hidebtn${id}" class="plusminus"><span class="pm_h"></span><span class="pm_v"></span></label>`

var addHideButton = function () {
  // If a hide button is already added, don't add another
  if (document.querySelector('div.hidecode input') !== null) {
      return;
  }

  // Find the input cells and add a hide button
  document.querySelectorAll('div.input_area div.highlight').forEach(function (item, index) {
    if (!item.parentElement.classList.contains("hidecode")) {
        // Skip the cell if it doesn't have a hidecode class
        return;
    }

    const id = codeCellId(index)
    item.setAttribute('id', id);
    item.insertAdjacentHTML('afterend', hideCodeButton(id))

    // Set up the visibility toggle
    hideLink = document.querySelector(`#${id} + input + label`);
    hideLink.addEventListener('click', toggleCodeCellVisibility)
  });
}


// Initialize the hide buttos
var initHiddenCells = function () {
    // Add hide buttons to the cells
    addHideButton();

    // Toggle the code cells that should be hidden
    document.querySelectorAll('div.hidecode input').forEach(function (item) {
        setCodeCellVisibility(item, 'hidden');
        item.checked = true;
    })
}

initFunction(initHiddenCells);

</script>


  <!-- Load custom website scripts -->
  <script src="/sommersemester_2019/assets/js/scripts.js" async></script>

  <!-- Load custom user CSS and JS  -->
  <script src="/sommersemester_2019/assets/custom/custom.js" async></script>
  <link rel="stylesheet" href="/sommersemester_2019/assets/custom/custom.css">

  <!-- Update interact links w/ REST param, is defined in includes so we can use templates -->
  

  <!-- Lunr search code - will only be executed on the /search page -->
  <script src="/sommersemester_2019/assets/js/lunr/lunr.min.js" type="text/javascript"></script>
  <script>var initQuery = function() {
  // See if we have a search box
  var searchInput = document.querySelector('input#lunr_search');
  if (searchInput === null) {
    return;
  }

  // Function to parse our lunr cache
  var idx = lunr(function () {
    this.field('title')
    this.field('excerpt')
    this.field('categories')
    this.field('tags')
    this.ref('id')

    this.pipeline.remove(lunr.trimmer)

    for (var item in store) {
      this.add({
        title: store[item].title,
        excerpt: store[item].excerpt,
        categories: store[item].categories,
        tags: store[item].tags,
        id: item
      })
    }
  });

  // Run search upon keyup
  searchInput.addEventListener('keyup', function () {
    var resultdiv = document.querySelector('#results');
    var query = document.querySelector("input#lunr_search").value.toLowerCase();
    var result =
      idx.query(function (q) {
        query.split(lunr.tokenizer.separator).forEach(function (term) {
          q.term(term, { boost: 100 })
          if(query.lastIndexOf(" ") != query.length-1){
            q.term(term, {  usePipeline: false, wildcard: lunr.Query.wildcard.TRAILING, boost: 10 })
          }
          if (term != ""){
            q.term(term, {  usePipeline: false, editDistance: 1, boost: 1 })
          }
        })
      });

      // Empty the results div
      while (resultdiv.firstChild) {
        resultdiv.removeChild(resultdiv.firstChild);
      }

    resultdiv.insertAdjacentHTML('afterbegin', '<p class="results__found">'+result.length+' Result(s) found</p>');
    for (var item in result) {
      var ref = result[item].ref;
      if(store[ref].teaser){
        var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<div class="archive__item-teaser">'+
                '<img src="'+store[ref].teaser+'" alt="">'+
              '</div>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      else{
    	  var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      resultdiv.insertAdjacentHTML('beforeend', searchitem);
    }
  });
};

initFunction(initQuery);
</script>
</head>

  <body>
    <!-- .js-show-sidebar shows sidebar by default -->
    <div id="js-textbook" class="c-textbook js-show-sidebar">
      



<nav id="js-sidebar" class="c-textbook__sidebar">
  <a href="https://python-kurs.github.io/sommersemester_2019/intro.html"><img src="/sommersemester_2019/images/logo/logo.png" class="textbook_logo" id="sidebar-logo" data-turbolinks-permanent/></a>
  <h2 class="c-sidebar__title">Sommersemester 2019</h2>
  <ul class="c-sidebar__chapters">
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/sommersemester_2019/intro.html"
        >
          
          Introduction
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/sommersemester_2019/motivation.html"
        >
          
          Motivation
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/sommersemester_2019/about.html"
        >
          
          About
        </a>

        
      </li>

      
    
      
      
        <li class="c-sidebar__chapter"><a class="c-sidebar__entry" href="/sommersemester_2019/search.html">Search</a></li>
        
      
      
        <li class="c-sidebar__divider"></li>
        
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/sommersemester_2019/units/units.html"
        >
          
          Sessions
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections ">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/units/S01E01.html"
                >
                  
                  Python Basics I
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/units/S01E02.html"
                >
                  
                  Python Basics II
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/units/S01E03.html"
                >
                  
                  Python Basics III
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/units/S01E04.html"
                >
                  
                  Data science I
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry c-sidebar__entry--active"
                  href="/sommersemester_2019/units/S01E05.html"
                >
                  
                  Data science II
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/units/S01E06.html"
                >
                  
                  Remote Sensing I
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/units/S01E07.html"
                >
                  
                  Remote Sensing II
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      
        <li class="c-sidebar__divider"></li>
        
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/sommersemester_2019/solutions/solutions.html"
        >
          
          Solutions
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections ">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/solutions/exercise-1/Exercise-1_Solutions.html"
                >
                  
                  Exercise I
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/solutions/exercise-2/Exercise-2_Solutions.html"
                >
                  
                  Exercise II
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/solutions/exercise-3/Exercise-3_Solutions.html"
                >
                  
                  Exercise III
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/solutions/exercise-4/Exercise-4_Solutions.html"
                >
                  
                  Exercise IV
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/solutions/exercise-5/Exercise-5_Solutions.html"
                >
                  
                  Exercise V
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/sommersemester_2019/solutions/exercise-6/Exercise-6_Solutions.html"
                >
                  
                  Exercise VI
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      
        <li class="c-sidebar__divider"></li>
        
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/sommersemester_2019/allgemeine_hinweise.html"
        >
          
          Allgemeine Hinweise
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/sommersemester_2019/results.html"
        >
          
          Results
        </a>

        
      </li>

      
    
  </ul>
  <p class="sidebar_footer">Powered by <a href="https://github.com/jupyter/jupyter-book">Jupyter Book</a></p>
</nav>

      
      <!-- Shamelessly copied from minimal mistakes -->


<!-- TOC will only show up if it has at least one item -->


  <aside class="sidebar__right">
    <nav class="onthispage">
      <header><h4 class="nav__title"><i class="fa fa-list"></i>   On this page</h4></header>
      <ul class="toc__menu">
  <li><a href="#numpy">Numpy…</a>
    <ul>
      <li><a href="#what-are-arrays">What are arrays?</a></li>
      <li><a href="#create-arrays">Create arrays</a></li>
      <li><a href="#other-ways-to-create-arrays">Other ways to create arrays</a></li>
      <li><a href="#accessing-elements-indexing">Accessing elements (indexing)</a></li>
      <li><a href="#slicing">Slicing</a></li>
      <li><a href="#reshaping">Reshaping</a></li>
      <li><a href="#views-vs-copies">Views vs. copies</a></li>
      <li><a href="#boolean-operations">Boolean operations</a></li>
      <li><a href="#aggregating">Aggregating</a></li>
      <li><a href="#ufuncs">Ufuncs</a></li>
      <li><a href="#broadcasting">Broadcasting</a></li>
      <li><a href="#broadcasting-rules">Broadcasting rules</a></li>
      <li><a href="#fancy-indexing">Fancy indexing</a></li>
    </ul>
  </li>
  <li><a href="#xarray">xarray</a>
    <ul>
      <li><a href="#datastructures">Datastructures</a></li>
      <li><a href="#dataset">Dataset</a></li>
      <li><a href="#indexing-and-selecting-data">Indexing and selecting data</a></li>
      <li><a href="#computations">Computations</a></li>
      <li><a href="#timeseries">Timeseries</a></li>
      <li><a href="#groupby">GroupBy</a></li>
      <li><a href="#conversion-to-dataframe">Conversion to dataframe</a></li>
      <li><a href="#writing-data-toreading-data-from-disk">Writing data to/reading data from disk</a></li>
      <li><a href="#reading-multiple-files">Reading multiple files</a></li>
      <li><a href="#dask">Dask</a></li>
    </ul>
  </li>
  <li><a href="#exercise-5">Exercise 5</a></li>
</ul>
    </nav>
  </aside>


      
      <main class="c-textbook__page" tabindex="-1">
          <div class="o-wrapper">
            <div class="c-sidebar-toggle">
  <!-- We show the sidebar by default so we use .is-active -->
  <button
    id="js-sidebar-toggle"
    class="hamburger hamburger--arrowalt is-active"
  >
    <span class="hamburger-box">
      <span class="hamburger-inner"></span>
    </span>
    <span class="c-sidebar-toggle__label">Toggle Sidebar</span>
  </button>
</div>

            
<div class="buttons">
<a href="/sommersemester_2019/content/units/S01E05.ipynb" download>
<button id="interact-button-download" class="interact-button">Download</button>
</a>

<button id="interact-button-thebelab" class="interact-button">Interact</button>




</div>


            <div class="c-textbook__content">
              
<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h1 id="data-science-ii">Data science II</h1>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h2 id="numpy"><a href="https://www.numpy.org/">Numpy</a>…</h2>

  <p><img src="https://upload.wikimedia.org/wikipedia/commons/1/1a/NumPy_logo.svg" width="400px" /></p>

  <ul>
    <li>lets us create N-dimensional arrays</li>
    <li>lets us efficiantly work with those arrays</li>
    <li>integrates with or is the basis for many other usefull packages like scipy, pandas, xarray, etc.</li>
  </ul>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="what-are-arrays">What are arrays?</h3>

  <ul>
    <li>like lists</li>
    <li>can have more dimensions that 1 (kind of like a list of lists when thinking about 2 dimensions)</li>
    <li>are easier to work with than list of lists</li>
  </ul>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="create-arrays">Create arrays</h3>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'figure.figsize'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">6.</span><span class="p">,</span> <span class="mf">8.</span><span class="p">,</span> <span class="mf">7.</span><span class="p">,</span> <span class="mf">9.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">6.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">,</span> <span class="mf">8.</span><span class="p">])</span>
<span class="n">a</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([3., 6., 8., 7., 9., 4., 1., 6., 4., 4., 8.])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Arrays have some attributes like:</p>

  <p>A dimension</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span><span class="o">.</span><span class="n">ndim</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>A shape</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(11,)
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>and of course a data type</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span><span class="o">.</span><span class="n">dtype</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dtype('float64')
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>To create arrays with more dimensions we use list of lists as the first argument to <code class="highlighter-rouge">np.array</code></p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smile</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p class="output output_png"><img src="../images/units/S01E05_14_0.png" alt="png" /></p>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>This arrays attributes are:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span><span class="o">.</span><span class="n">ndim</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(10, 10)
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span><span class="o">.</span><span class="n">dtype</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dtype('int64')
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="info ">
</div>-->

  <div class="alert info">

    <p><strong>Info</strong></p>

    <p>There are more attributes for example</p>
    <ul>
      <li>size: gives the total number of elements</li>
      <li>itemsize: gives the memory size of one element</li>
      <li>nbytes: gives the total memory size of the array</li>
    </ul>

  </div>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Notice that by default numpy creates data types of 64 bit size. To create other types you need to specify the <code class="highlighter-rouge">dtype</code> argument in the array initalisation which takes one of the many data types listed in the documentation <a href="https://docs.scipy.org/doc/numpy/reference/arrays.scalars.html#arrays-scalars-built-in">here</a></p>

  <p>You can also always cast to a different data type later on:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">dtype</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dtype('int32')
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="other-ways-to-create-arrays">Other ways to create arrays</h3>

  <p>Most of the time we don’t want to create arrays with specific values by hand but need to initialize arrays of a certain shape to populate them with values later.
While there are more the following two are the most used ones.</p>

  <p>Create array with zeros:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0.]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Create an array with zeros based on the shape and dtype of another array:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">smile</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Create array with ones:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.]], dtype=float32)
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Similarly to the zeros case there is a function <code class="highlighter-rouge">np.ones_like</code>.<br />
Notice that additionally we can specify a dtype other than the default of np.float64.</p>

</div>

<div class="markdown_area ">
  <!--<div class="task ">
</div>-->

  <div class="alert task">

    <h4 id="task"><strong>Task</strong></h4>

    <p>Two more conveniant functions are <code class="highlighter-rouge">np.arange(start, stop, n)</code> and <code class="highlighter-rouge">np.linspace(start, stop, n)</code>.</p>
    <ul>
      <li>Try them both and find out what they are each doing</li>
    </ul>

  </div>

</div>

<div class="markdown_area hidecode">
  <!--<div class="solution hidecode hide_input ">
</div>-->

  <div class="alert solution">

    <h4 id="solution"><strong>Solution</strong></h4>

    <p>np.arange(start, stop, step) creates a sequence of numbers from start to stop with increment step<br />
np.linspace(start, stop, n) creates a sequence of n evenly spaced numbers from start to stop.</p>

  </div>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="accessing-elements-indexing">Accessing elements (indexing)</h3>

  <p>Array elements can be accessed similar to lists with the bracket notation.<br />
For higher dimensional arrays we need to know which index accesses a certain dimension or <strong>axis</strong>.<br />
<img src="https://www.oreilly.com/library/view/elegant-scipy/9781491922927/assets/elsp_0105.png" width="700px" /></p>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>The following accesses the left eye of the smiley which is located in row 2 and column 3 (counts start at 0).</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>This can also be used to assign new values</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smile</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p class="output output_png"><img src="../images/units/S01E05_36_0.png" alt="png" /></p>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="slicing">Slicing</h3>

  <p>Additionally to indexing slicing (again simillar to lists) is possible to select more than one lement.<br />
The general syntax is <code class="highlighter-rouge">[start:stop:step]</code>.</p>

  <p>The following selects only the smile part of the smiley:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mouth</span> <span class="o">=</span> <span class="n">smile</span><span class="p">[</span><span class="mi">6</span><span class="p">:,</span> <span class="p">:]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">mouth</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p class="output output_png"><img src="../images/units/S01E05_38_0.png" alt="png" /></p>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Or we can select every other element</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([3, 8, 9, 1, 4, 8], dtype=int32)
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Notice that we omitted the stop index while selecting rows and both start and stop index with the columns as well as the step size.<br />
By default numpy if an index is omitted slicing</p>
  <ul>
    <li><strong>starts at 0 (start omitted)</strong>,</li>
    <li><strong>reaches to the end (stop is omitted)</strong></li>
    <li>and uses a <strong>step size of 1 (step omitted)</strong>.</li>
  </ul>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>We can also combine indexing and slicing.</p>

  <p>The following “blindfolds” our smiley:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span>

<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smile</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p class="output output_png"><img src="../images/units/S01E05_43_0.png" alt="png" /></p>

<div class="markdown_area ">
  <!--<div class="task ">
</div>-->

  <div class="alert task">

    <h4 id="task-1"><strong>Task</strong></h4>

    <ol>
      <li>Copy the smile array init code from above so you don’t have to type it yourself</li>
      <li>Give the smiley a nose 2x2 elements big using the same value used for the eyes and mouth</li>
      <li>What happens when you select a value of -1 for the step index while slicing (Hint: try it on both axis)?</li>
    </ol>

  </div>

</div>

<div class="markdown_area hidecode">
  <!--<div class="solution hidecode hide_input ">
</div>-->

  <div class="alert solution">

    <h4 id="solution-1"><strong>Solution</strong></h4>

    <p>The nose:</p>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smile</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>    </div>
    <p>Reverting array:</p>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smile</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">,:])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>    </div>

  </div>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="reshaping">Reshaping</h3>

  <p>Sometimes data needs to be converted to another shape which can be done with the <code class="highlighter-rouge">reshape</code> method.</p>

  <p>For example creating a 2d array from a 1d array</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">b</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([1, 2, 3, 4, 5, 6, 7, 8, 9])
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>While in the special case of converting a 1D array to a vector can also be accomplished using <code class="highlighter-rouge">reshape</code> it is easier to use the following since no knowledge of the exact shape is necessary.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([3, 6, 8, 7, 9, 4, 1, 6, 4, 4, 8], dtype=int32)
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(11, 1)
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h4 id="flatten-vs-ravel">Flatten vs. Ravel</h4>

  <p>The opposite direction of creating a 1d array from a higher dimensional array can be done using either</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 9,
       9, 9, 9, 9, 9, 9, 9, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5, 1, 1, 1,
       1, 5, 1, 1, 0, 1, 1, 5, 1, 1, 5, 1, 1, 0, 0, 0, 1, 1, 5, 5, 1, 1,
       0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>or</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 9,
       9, 9, 9, 9, 9, 9, 9, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5, 1, 1, 1,
       1, 5, 1, 1, 0, 1, 1, 5, 1, 1, 5, 1, 1, 0, 0, 0, 1, 1, 5, 5, 1, 1,
       0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>The difference between the two is <code class="highlighter-rouge">flatten</code> returns a <strong>copy</strong> while <code class="highlighter-rouge">ravel</code> returns a <strong>view</strong> of the array.</p>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="views-vs-copies">Views vs. copies</h3>

  <p>Remember our smiley</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smile</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p class="output output_png"><img src="../images/units/S01E05_58_0.png" alt="png" /></p>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Lets say we want to do some calculations on the mouth area of the array. A common workflow would be to select the corresponding part of the array first</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nose</span> <span class="o">=</span> <span class="n">smile</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span>
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>To be able to differentiate between the nose and the mouth we assign a new value to the nose</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nose</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">nose</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[ 1,  1, 20, 20,  1,  1],
       [ 1,  1, 20, 20,  1,  1],
       [ 5,  1,  1,  1,  1,  5],
       [ 1,  5,  1,  1,  5,  1],
       [ 1,  1,  5,  5,  1,  1]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Now we could calculate for example occurance of each value in the array.</p>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Later on we want to keep working on the original array but notice</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smile</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p class="output output_png"><img src="../images/units/S01E05_65_0.png" alt="png" /></p>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h5 id="what-happend">What happend?</h5>

  <p>Slicing returned a so called <strong>view</strong> of the array which points to the same memory and therefore if changed, changes the values in the original array too.</p>

  <p>This is different to normal python lists where slicing returns a copy.</p>

  <p>In order to keep a real copy of the array for later use you need to use the <code class="highlighter-rouge">np.copy()</code> method (which can also be used on slices):</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">backup</span> <span class="o">=</span> <span class="n">smile</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</code></pre></div>  </div>

  <p><a href="https://www.jessicayung.com/numpy-views-vs-copies-avoiding-costly-mistakes/">Here</a>, for example, you can find more information around advantages of copies and views</p>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <style>
td, th{
  font-size: 30px
}
</style>

  <table>
    <thead>
      <tr>
        <th>View</th>
        <th>Copy</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>a[1,:]</td>
        <td> </td>
      </tr>
      <tr>
        <td>np.ravel()</td>
        <td>np.flatten()</td>
      </tr>
    </tbody>
  </table>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="boolean-operations">Boolean operations</h3>

  <p>Using boolean operators we can test an array on where a certain condition is met.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span> <span class="o">&gt;</span> <span class="mi">8</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[False, False, False, False, False, False, False, False, False,
        False],
       [False, False, False, False, False, False, False, False, False,
        False],
       [False,  True,  True,  True,  True,  True,  True,  True,  True,
        False],
       [False, False, False, False, False, False, False, False, False,
        False],
       [False, False, False, False,  True,  True, False, False, False,
        False],
       [False, False, False, False,  True,  True, False, False, False,
        False],
       [False, False, False, False, False, False, False, False, False,
        False],
       [False, False, False, False, False, False, False, False, False,
        False],
       [False, False, False, False, False, False, False, False, False,
        False],
       [False, False, False, False, False, False, False, False, False,
        False]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>We can also use this array as a mask to select the corresponding elements from the array</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span><span class="p">[</span><span class="n">smile</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([ 9,  9,  9,  9,  9,  9,  9,  9, 20, 20, 20, 20])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>or assign new values to those locations</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">smile</span><span class="p">[</span><span class="n">smile</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>

<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smile</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p class="output output_png"><img src="../images/units/S01E05_73_0.png" alt="png" /></p>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h4 id="missing-values">Missing values</h4>

  <p>In arrays with data type float missing values are assigned <code class="highlighter-rouge">np.nan</code></p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">missing</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">5.</span><span class="p">)</span>
<span class="n">missing</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="n">missing</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([ 1., nan, nan,  4.])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>To handle these we can use boolean masks together with the <code class="highlighter-rouge">np.isnan</code> method</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">missing</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">missing</span><span class="p">)]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([nan, nan])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Selecting all value which are not nan is also possible</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">missing</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">missing</span><span class="p">)]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([1., 4.])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="aggregating">Aggregating</h3>

  <p>Numpy has many built in functions to calculate basic statistics for example the min (max), mean or standard deviation</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">np</span><span class="o">.</span><span class="nb">max</span><span class="p">(</span><span class="n">smile</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>These functions can be used together with the <code class="highlighter-rouge">axis</code> argument to calculate these statistics for any given axis</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">smile</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([ 0.4,  0.6, -4. ,  1. , -0.2, -0.2,  1.8,  1.6,  1.4,  0.4])
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">smile</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([0.48989795, 0.48989795, 2.        , 0.        , 2.4       ,
       2.4       , 1.6       , 1.74355958, 1.8547237 , 0.48989795])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>These functions are very fast and should not be confused with other python built in function which might do the same,
for example sum.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">big_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)</span>
<span class="o">%</span><span class="n">timeit</span> <span class="nb">sum</span><span class="p">(</span><span class="n">big_array</span><span class="p">)</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">np</span><span class="o">.</span><span class="nb">sum</span><span class="p">(</span><span class="n">big_array</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_stream highlighter-rouge"><div class="highlight"><pre class="highlight"><code>90.6 ms ± 2.15 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
670 µs ± 31.6 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)

</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="task ">
</div>-->

  <div class="alert task">

    <h4 id="task-2"><strong>Task</strong></h4>

    <ol>
      <li>Assign the following array to a new variable: <code class="highlighter-rouge">np.array([[1., np.nan, 7., 30., -4.], [-7., 18., 11., np.nan, 3.]])</code></li>
      <li>Select all but the last column and assign it to a new variable, keeping the old array as backup</li>
      <li>Assign a new value to all nan’s in the selection created in task 2</li>
      <li>Try to calculate the median for the original array over the rows</li>
      <li>Go to the numpy documentation <a href="https://docs.scipy.org/doc/numpy/reference/routines.statistics.html">here</a> and find a function which gets around the problem you encountered in task 4</li>
    </ol>

  </div>

</div>

<div class="markdown_area hidecode">
  <!--<div class="solution hidecode hide_input ">
</div>-->

  <div class="alert solution">

    <h4 id="solution-2"><strong>Solution</strong></h4>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">7.</span><span class="p">,</span> <span class="mf">30.</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">7.</span><span class="p">,</span> <span class="mf">18.</span><span class="p">,</span> <span class="mf">11.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]])</span>
</code></pre></div>    </div>

    <p>Remove the last column and make a copy to new variable b</p>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:,:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</code></pre></div>    </div>

    <p>Assign all <code class="highlighter-rouge">np.nan</code>s the value -99</p>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">b</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">b</span><span class="p">)]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">99</span>
</code></pre></div>    </div>

    <p>The standard median function included <code class="highlighter-rouge">np.nan</code> values when calculating</p>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>    </div>

    <p>To ignore <code class="highlighter-rouge">np.nan</code> values most aggregation functions have an equivalent which is prepended with “nan”</p>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">np</span><span class="o">.</span><span class="n">nanmedian</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>    </div>

  </div>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="ufuncs">Ufuncs</h3>

  <p>Next to functions to aggregate the values in an array there are functions which operate on arrays in an element-by-element fashion. These “vectorized” functions are called universal functions (ufuncs).</p>

  <p>All basic arithmetic operations like</p>
  <ul>
    <li>addition,</li>
    <li>subtraction,</li>
    <li>multiplication,</li>
    <li>division as well as</li>
    <li>exponentiation and</li>
    <li>modulus</li>
    <li>(and more)</li>
  </ul>

  <p>are implemented. These can be used with the usual operators we already know.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">a</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">4</span>
<span class="n">a</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[ 4.3,  5.2,  6.7],
       [ 8.8, 11.5, 14.8],
       [18.7, 23.2, 28.3]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>These can not only be used with scalars but also with arrays</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>

<span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[4.3       , 2.6       , 2.23333333],
       [2.2       , 2.3       , 2.46666667],
       [2.67142857, 2.9       , 3.14444444]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>These common operators are wrappers for the corresponding numpy functions. For example <code class="highlighter-rouge">+</code> wraps <code class="highlighter-rouge">np.sum()</code>.</p>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>The above functions all operated on two arguments. Functions like <code class="highlighter-rouge">np.abs()</code> which returns the absolute value take only one argument. There are many functions like this implemented in numpy for example the sine function</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p class="output output_png"><img src="../images/units/S01E05_96_0.png" alt="png" /></p>

<div class="markdown_area ">
  <!--<div class="info ">
</div>-->

  <div class="alert info">

    <p><strong>Info</strong></p>

    <ul>
      <li>Have a look at the <a href="https://docs.scipy.org/doc/scipy/reference/special.html">scipy.special</a> library if you need a very special function.</li>
      <li>Many of the ufuncs have a special <code class="highlighter-rouge">out</code> parameter to which you can supply an output array (even slices work). Using it especially for very large arrays unecessary copies can be avoided saving memory.</li>
    </ul>

  </div>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="broadcasting">Broadcasting</h3>

  <p>Above we saw that operations on same shape arrays operated element wise</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>

<span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[ 2,  4,  6],
       [ 8, 10, 12],
       [14, 16, 18]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Iterestingly, even though, the arguments are not of the same shape, the following also worked</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">+</span> <span class="mi">5</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[ 6,  7,  8],
       [ 9, 10, 11],
       [12, 13, 14]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Even more interesting is the following</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">c</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([1, 2, 3])
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">+</span> <span class="n">c</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[ 2,  4,  6],
       [ 5,  7,  9],
       [ 8, 10, 12]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>This behaviour is called <strong>broadcasting</strong> and is a very powerfull feature. You can thinkg of it as numpy automatically duplicating the values to the correct size. The advantage is that no actuall copying memory wise is done.</p>

  <p>The following picture makes this a little clearer.</p>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p><img src="https://scipy-lectures.org/_images/numpy_broadcasting.png" width="700px" /><br />
<small>Source: https://scipy-lectures.org/_images/numpy_broadcasting.png</small></p>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="broadcasting-rules">Broadcasting rules</h3>

  <ol>
    <li>If the number of dimensions differ, the one with fewer dimensions is padded with ones on its left side.</li>
    <li>If the shape does not match in any dimension, the array with shape equal to 1 in that dimension is stretched to match the other shape.</li>
    <li>If in any dimension the sizes disagree and neither is equal to 1, an error is raised.</li>
  </ol>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="fancy-indexing">Fancy indexing</h3>

  <p>Up to now we used single indices to select elements or slices to select continous (parts) of columns and/or rows.</p>

  <p><strong>Fancy indexing</strong> allows us to select multiple elements with different indices in a noncontinous fashion by passing a list or array of indices.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
<span class="n">a</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12])
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ind</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([3, 6, 8])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>The shape of the result depends on the shape of the index array</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
                <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]])</span>
<span class="n">ind</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[2, 5],
       [7, 9]])
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[ 3,  6],
       [ 8, 10]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>This also works for higher dimensional arrays</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">a</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[ 1,  2,  3,  4],
       [ 5,  6,  7,  8],
       [ 9, 10, 11, 12]])
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">rind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="n">a</span><span class="p">[</span><span class="n">rind</span><span class="p">,</span> <span class="n">cind</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([ 1, 12])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>How the indices are combined is determined by the same rules as for broadcasting.</p>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Fancy indexing can also be combined normal indexing and slicing</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"Array:</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Column indices:</span><span class="se">\n</span><span class="s"> "</span><span class="p">,</span> <span class="n">cind</span><span class="p">)</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">cind</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_stream highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Array:
 [[ 1  2  3  4]
 [ 5  6  7  8]
 [ 9 10 11 12]]
Column indices:
  [0 3]

</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([5, 8])
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"Row indices:</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">rind</span><span class="p">)</span>
<span class="n">a</span><span class="p">[</span><span class="n">rind</span><span class="p">,</span> <span class="p">:]</span>
</code></pre></div></div>

<div class="output output_stream highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Row indices:
 [0 2]

</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[ 1,  2,  3,  4],
       [ 9, 10, 11, 12]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Fancy indexing always returns copies.<br /></p>

  <p>Now we can add one more thing to our copies vs. views table:</p>

  <table>
    <thead>
      <tr>
        <th>View</th>
        <th>Copy</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>a[1,:]</td>
        <td>a[:, [0,1]]</td>
      </tr>
      <tr>
        <td>np.ravel()</td>
        <td>np.flatten()</td>
      </tr>
    </tbody>
  </table>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h2 id="xarray">xarray</h2>

  <p><img src="https://xarray.pydata.org/en/stable/_static/dataset-diagram-logo.png" alt="" /></p>

  <ul>
    <li>combines and extends the core strength of numpy and pandas</li>
    <li>enables use of dimension names instead of axis labels for selection and operations</li>
    <li>enables writing of less and more readable code</li>
  </ul>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="datastructures">Datastructures</h3>

  <ul>
    <li><code class="highlighter-rouge">DataArray</code> is like a <code class="highlighter-rouge">pandas.Series</code> but for N dimensions</li>
    <li><code class="highlighter-rouge">Dataset</code> is a container of any number of <code class="highlighter-rouge">DataArray</code>s which share dimensions and compares to a <code class="highlighter-rouge">pandas.DataFrame</code> but for N dimensions</li>
  </ul>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h4 id="dataarray">DataArray</h4>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="n">xr</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">locs</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Marburg"</span><span class="p">,</span> <span class="s">"Giessen"</span><span class="p">,</span> <span class="s">"Frankfurt"</span><span class="p">]</span>

<span class="n">times</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">"2018-12-01"</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">"M"</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_temp</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="p">[</span><span class="n">times</span><span class="p">,</span> <span class="n">locs</span><span class="p">],</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s">"time"</span><span class="p">,</span> <span class="s">"cities"</span><span class="p">])</span>

<span class="n">city_temp</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray (time: 4, cities: 3)&gt;
array([[7.899251e-01, 2.555974e-01, 4.508836e-04],
       [1.764407e-01, 1.824940e-01, 3.305773e-01],
       [9.613692e-01, 8.639625e-01, 4.628597e-02],
       [5.449813e-01, 2.402334e-01, 9.979851e-01]])
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 2019-02-28 2019-03-31
  * cities   (cities) &lt;U9 'Marburg' 'Giessen' 'Frankfurt'
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h4 id="attributes">Attributes</h4>

  <p>Attributes can be used for informational purposes. Xarray does not interpret them in any way and they are only propagated in calculations when it is unambigous.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_temp</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"city_temperatures"</span>
<span class="n">city_temp</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">"Description"</span><span class="p">]</span> <span class="o">=</span>  <span class="s">"Monthly temperature values for the cities of Marburg, Giessen and Frankfurt."</span>
<span class="n">city_temp</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">"units"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"Degrees Celsius"</span>
<span class="n">city_temp</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'city_temperatures' (time: 4, cities: 3)&gt;
array([[7.899251e-01, 2.555974e-01, 4.508836e-04],
       [1.764407e-01, 1.824940e-01, 3.305773e-01],
       [9.613692e-01, 8.639625e-01, 4.628597e-02],
       [5.449813e-01, 2.402334e-01, 9.979851e-01]])
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 2019-02-28 2019-03-31
  * cities   (cities) &lt;U9 'Marburg' 'Giessen' 'Frankfurt'
Attributes:
    Description:  Monthly temperature values for the cities of Marburg, Giess...
    units:        Degrees Celsius
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="dataset">Dataset</h3>

  <p>A <code class="highlighter-rouge">xr.Dataset</code> can be created by supplying dictionaries for the parameters <code class="highlighter-rouge">data_vars</code>, <code class="highlighter-rouge">coords</code> and <code class="highlighter-rouge">attrs</code>. It is always good to provide some descriptive attributes even though the parameter <code class="highlighter-rouge">attrs</code> is optional.</p>

  <p>The <code class="highlighter-rouge">data_vars</code> dictionary keys are the names of the variables while the values are either:</p>
  <ul>
    <li><code class="highlighter-rouge">DataArray</code>s</li>
    <li>pandas objects, which will be converted to <code class="highlighter-rouge">DataArray</code>s</li>
    <li>a tuple of the form (dim, data) where dim is a list of dimension names and data a <code class="highlighter-rouge">np.array</code> (see <a href="https://xarray.pydata.org/en/stable/data-structures.html#creating-a-dataset">documentation</a> for more details)</li>
  </ul>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">times</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">"2019-06-01"</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">"M"</span><span class="p">)</span>

<span class="n">precip_attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Description"</span><span class="p">:</span> <span class="s">"Precipitation for the cities of Marburg, Giessen and Frankfurt"</span><span class="p">,</span>
                <span class="s">"units"</span><span class="p">:</span> <span class="s">"mm"</span><span class="p">}</span>

<span class="n">city_precip</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="p">[</span><span class="n">times</span><span class="p">,</span> <span class="n">locs</span><span class="p">],</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s">"time"</span><span class="p">,</span> <span class="s">"cities"</span><span class="p">],</span> <span class="n">attrs</span><span class="o">=</span><span class="n">precip_attrs</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">"city_precipitation"</span><span class="p">)</span>
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>When we create a <code class="highlighter-rouge">Dataset</code> from <code class="highlighter-rouge">DataArrays</code> we can also omit the <code class="highlighter-rouge">coords</code> parameter as long as all of them share the same dimensions.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">({</span><span class="s">"Temperature"</span><span class="p">:</span> <span class="n">city_temp</span><span class="p">,</span> <span class="s">"Precipitation"</span><span class="p">:</span> <span class="n">city_precip</span><span class="p">})</span>
<span class="n">city_ds</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (cities: 3, time: 10)
Coordinates:
  * time           (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
  * cities         (cities) &lt;U9 'Marburg' 'Giessen' 'Frankfurt'
Data variables:
    Temperature    (time, cities) float64 0.7899 0.2556 0.0004509 ... nan nan
    Precipitation  (time, cities) float64 nan nan nan ... 0.3304 0.6635 0.4167
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p><code class="highlighter-rouge">Datasets</code> can also have descriptive attributes</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">"Description"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"Measurements of Temperature and Precipitation"</span>
<span class="n">city_ds</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (cities: 3, time: 10)
Coordinates:
  * time           (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
  * cities         (cities) &lt;U9 'Marburg' 'Giessen' 'Frankfurt'
Data variables:
    Temperature    (time, cities) float64 0.7899 0.2556 0.0004509 ... nan nan
    Precipitation  (time, cities) float64 nan nan nan ... 0.3304 0.6635 0.4167
Attributes:
    Description:  Measurements of Temperature and Precipitation
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>When we access one of the variables we see that they can have separate attributes describing only this specific variable.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="p">[</span><span class="s">"Temperature"</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'Temperature' (time: 10, cities: 3)&gt;
array([[7.899251e-01, 2.555974e-01, 4.508836e-04],
       [1.764407e-01, 1.824940e-01, 3.305773e-01],
       [9.613692e-01, 8.639625e-01, 4.628597e-02],
       [5.449813e-01, 2.402334e-01, 9.979851e-01],
       [         nan,          nan,          nan],
       [         nan,          nan,          nan],
       [         nan,          nan,          nan],
       [         nan,          nan,          nan],
       [         nan,          nan,          nan],
       [         nan,          nan,          nan]])
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
  * cities   (cities) &lt;U9 'Marburg' 'Giessen' 'Frankfurt'
Attributes:
    Description:  Monthly temperature values for the cities of Marburg, Giess...
    units:        Degrees Celsius
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Xarray has some conveniant functions to create <code class="highlighter-rouge">DataArray</code>s and <code class="highlighter-rouge">Dataset</code>s from pandas series or dataframes respectively.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="n">garmisch</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"../data/produkt_klima_tag_20171010_20190412_01550.txt"</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s">"MESS_DATUM"</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s">";"</span><span class="p">)</span>
<span class="n">zugspitze</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"../data/produkt_klima_tag_20171010_20190412_05792.txt"</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s">"MESS_DATUM"</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s">";"</span><span class="p">)</span>

<span class="n">klima_tag</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">garmisch</span><span class="p">,</span> <span class="n">zugspitze</span><span class="p">])</span>
<span class="n">klima_tag</span> <span class="o">=</span> <span class="n">klima_tag</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s">"STATIONS_ID"</span><span class="p">,</span> <span class="s">"MESS_DATUM"</span><span class="p">])</span>
<span class="n">klima_tag</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div class="output output_html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>QN_3</th>
      <th>FX</th>
      <th>FM</th>
      <th>QN_4</th>
      <th>RSK</th>
      <th>RSKF</th>
      <th>SDK</th>
      <th>SHK_TAG</th>
      <th>NM</th>
      <th>VPM</th>
      <th>PM</th>
      <th>TMK</th>
      <th>UPM</th>
      <th>TXK</th>
      <th>TNK</th>
      <th>TGK</th>
      <th>eor</th>
    </tr>
    <tr>
      <th>STATIONS_ID</th>
      <th>MESS_DATUM</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1550</th>
      <th>2017-10-10</th>
      <td>10</td>
      <td>5.6</td>
      <td>1.0</td>
      <td>3</td>
      <td>0.0</td>
      <td>6</td>
      <td>2.300</td>
      <td>0</td>
      <td>7.5</td>
      <td>9.4</td>
      <td>937.40</td>
      <td>9.3</td>
      <td>82.50</td>
      <td>15.7</td>
      <td>4.6</td>
      <td>3.0</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>2017-10-11</th>
      <td>10</td>
      <td>-999.0</td>
      <td>-999.0</td>
      <td>3</td>
      <td>0.0</td>
      <td>0</td>
      <td>9.533</td>
      <td>0</td>
      <td>2.6</td>
      <td>9.1</td>
      <td>938.41</td>
      <td>9.2</td>
      <td>81.04</td>
      <td>18.5</td>
      <td>2.9</td>
      <td>1.4</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>2017-10-12</th>
      <td>10</td>
      <td>-999.0</td>
      <td>-999.0</td>
      <td>3</td>
      <td>0.0</td>
      <td>0</td>
      <td>9.483</td>
      <td>0</td>
      <td>1.9</td>
      <td>9.0</td>
      <td>941.30</td>
      <td>10.6</td>
      <td>75.92</td>
      <td>22.2</td>
      <td>3.1</td>
      <td>1.1</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>2017-10-13</th>
      <td>10</td>
      <td>-999.0</td>
      <td>-999.0</td>
      <td>3</td>
      <td>0.0</td>
      <td>0</td>
      <td>9.483</td>
      <td>0</td>
      <td>3.8</td>
      <td>10.3</td>
      <td>944.63</td>
      <td>10.7</td>
      <td>82.04</td>
      <td>19.5</td>
      <td>4.8</td>
      <td>2.9</td>
      <td>eor</td>
    </tr>
    <tr>
      <th>2017-10-14</th>
      <td>10</td>
      <td>-999.0</td>
      <td>-999.0</td>
      <td>3</td>
      <td>0.0</td>
      <td>0</td>
      <td>9.617</td>
      <td>0</td>
      <td>0.3</td>
      <td>9.9</td>
      <td>944.99</td>
      <td>11.2</td>
      <td>78.67</td>
      <td>21.4</td>
      <td>3.9</td>
      <td>1.9</td>
      <td>eor</td>
    </tr>
  </tbody>
</table>
</div>
</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>After setting the index the conversion of any of the columns (series) of the pandas dataframe  to a <code class="highlighter-rouge">xr.DataArray</code> is easy</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kt_da</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="o">.</span><span class="n">from_series</span><span class="p">(</span><span class="n">klima_tag</span><span class="p">[</span><span class="s">" TMK"</span><span class="p">])</span>
<span class="n">kt_da</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray ' TMK' (STATIONS_ID: 2, MESS_DATUM: 550)&gt;
array([[ 9.3,  9.2, 10.6, ...,  7.6,  5.7,  4.4],
       [-4.5, -1.3, -1.2, ..., -4.9, -7.5, -8. ]])
Coordinates:
  * STATIONS_ID  (STATIONS_ID) int64 1550 5792
  * MESS_DATUM   (MESS_DATUM) datetime64[ns] 2017-10-10 ... 2019-04-12
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>If we want to use all variables (columns) in the dataframe we can directly convert it to a <code class="highlighter-rouge">xr.Dataset</code> without the detour of converting every column to a <code class="highlighter-rouge">xr.DataArray</code> like above.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kt_ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="o">.</span><span class="n">from_dataframe</span><span class="p">(</span><span class="n">klima_tag</span><span class="p">)</span>
<span class="n">kt_ds</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:      (MESS_DATUM: 550, STATIONS_ID: 2)
Coordinates:
  * STATIONS_ID  (STATIONS_ID) int64 1550 5792
  * MESS_DATUM   (MESS_DATUM) datetime64[ns] 2017-10-10 ... 2019-04-12
Data variables:
    QN_3         (STATIONS_ID, MESS_DATUM) int64 10 10 10 10 10 10 ... 1 1 1 1 1
      FX         (STATIONS_ID, MESS_DATUM) float64 5.6 -999.0 -999.0 ... 8.7 9.6
      FM         (STATIONS_ID, MESS_DATUM) float64 1.0 -999.0 -999.0 ... 3.1 2.5
    QN_4         (STATIONS_ID, MESS_DATUM) int64 3 3 3 3 3 3 3 ... 1 1 1 1 1 1 1
     RSK         (STATIONS_ID, MESS_DATUM) float64 0.0 0.0 0.0 ... 10.1 1.6 0.0
    RSKF         (STATIONS_ID, MESS_DATUM) int64 6 0 0 0 0 0 0 ... 0 7 7 7 7 7 7
     SDK         (STATIONS_ID, MESS_DATUM) float64 2.3 9.533 9.483 ... 0.0 8.833
    SHK_TAG      (STATIONS_ID, MESS_DATUM) int64 0 0 0 0 0 ... 430 435 430 430
      NM         (STATIONS_ID, MESS_DATUM) float64 7.5 2.6 1.9 ... 7.9 8.0 6.3
     VPM         (STATIONS_ID, MESS_DATUM) float64 9.4 9.1 9.0 ... 3.9 3.2 2.1
      PM         (STATIONS_ID, MESS_DATUM) float64 937.4 938.4 ... 702.5 702.9
     TMK         (STATIONS_ID, MESS_DATUM) float64 9.3 9.2 10.6 ... -7.5 -8.0
     UPM         (STATIONS_ID, MESS_DATUM) float64 82.5 81.04 ... 91.46 66.38
     TXK         (STATIONS_ID, MESS_DATUM) float64 15.7 18.5 22.2 ... -6.0 -2.7
     TNK         (STATIONS_ID, MESS_DATUM) float64 4.6 2.9 3.1 ... -10.7 -11.8
     TGK         (STATIONS_ID, MESS_DATUM) float64 3.0 1.4 1.1 ... -999.0 -999.0
    eor          (STATIONS_ID, MESS_DATUM) object 'eor' 'eor' ... 'eor' 'eor'
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h4 id="properties-of-datasets-and-dataarrays">Properties of Datasets and DataArrays</h4>

  <p>Any of the properties can be accessed seperately and values and attrs can be modified in place
For <code class="highlighter-rouge">DataArray</code></p>
  <ul>
    <li>values</li>
    <li>coords</li>
    <li>dims</li>
    <li>attrs</li>
    <li>name</li>
  </ul>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>For <code class="highlighter-rouge">Dataset</code></p>
  <ul>
    <li>data_vars</li>
    <li>coords</li>
    <li>attrs</li>
  </ul>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kt_da</span><span class="o">.</span><span class="n">values</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[ 9.3,  9.2, 10.6, ...,  7.6,  5.7,  4.4],
       [-4.5, -1.3, -1.2, ..., -4.9, -7.5, -8. ]])
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="task ">
</div>-->

  <div class="alert task">

    <h4 id="task-3"><strong>Task</strong></h4>

    <ol>
      <li>You should already have the two csv’s used above on your computer. If not download them again from <a href="https://github.com/python-kurs/sommersemester_2019/blob/master/content/data/produkt_klima_tag_20171010_20190412_05792.txt">here</a> and <a href="https://github.com/python-kurs/sommersemester_2019/blob/master/content/data/produkt_klima_tag_20171010_20190412_01550.txt">here</a>.</li>
      <li>Read them and create a Dataset from them like shown above.</li>
      <li>Look at the properties. Give them some descriptive attributes.</li>
    </ol>

  </div>

</div>

<div class="markdown_area ">
  <!--<div class="solution ">
</div>-->

  <div class="alert solution">

    <h4 id="solution-3"><strong>Solution</strong></h4>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">garmisch</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"../data/produkt_klima_tag_20171010_20190412_01550.txt"</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s">"MESS_DATUM"</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s">";"</span><span class="p">)</span>
<span class="n">zugspitze</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"../data/produkt_klima_tag_20171010_20190412_05792.txt"</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s">"MESS_DATUM"</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s">";"</span><span class="p">)</span>

<span class="n">klima_tag</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">garmisch</span><span class="p">,</span> <span class="n">zugspitze</span><span class="p">])</span>
<span class="n">klima_tag</span> <span class="o">=</span> <span class="n">klima_tag</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s">"STATIONS_ID"</span><span class="p">,</span> <span class="s">"MESS_DATUM"</span><span class="p">])</span>

<span class="n">kt_ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="o">.</span><span class="n">from_dataframe</span><span class="p">(</span><span class="n">klima_tag</span><span class="p">)</span>

<span class="n">kt_ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">"Description"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"DWD climate data for stations Garmisch-Partenkirchen und Zugspitze"</span>

<span class="c">#Adding descriptive attributes for two example variables</span>
<span class="n">k_ds</span><span class="p">[</span><span class="s">" TXK"</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">"Description"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"Daily maximum temperature"</span>
<span class="n">k_ds</span><span class="p">[</span><span class="s">" TXK"</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">"Units"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"Degrees Celsius"</span>

<span class="n">k_ds</span><span class="p">[</span><span class="s">" TNK"</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">"Description"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"Daily minimum temperature"</span>
<span class="n">k_ds</span><span class="p">[</span><span class="s">" TNK"</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">"Units"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"Degrees Celsius"</span>

</code></pre></div>    </div>

  </div>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="indexing-and-selecting-data">Indexing and selecting data</h3>

  <p>Data selection in xarray is very flexible.</p>

  <p>For <code class="highlighter-rouge">DataArray</code>s you can select by positional index like numpy:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_temp</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'city_temperatures' (time: 4)&gt;
array([4.508836e-04, 3.305773e-01, 4.628597e-02, 9.979851e-01])
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 2019-02-28 2019-03-31
    cities   &lt;U9 'Frankfurt'
Attributes:
    Description:  Monthly temperature values for the cities of Marburg, Giess...
    units:        Degrees Celsius
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>by position with label like in pandas:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_temp</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s">"Marburg"</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'city_temperatures' (time: 4)&gt;
array([0.789925, 0.176441, 0.961369, 0.544981])
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 2019-02-28 2019-03-31
    cities   &lt;U9 'Marburg'
Attributes:
    Description:  Monthly temperature values for the cities of Marburg, Giess...
    units:        Degrees Celsius
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>by dimension name with index:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_temp</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">cities</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'city_temperatures' (time: 4)&gt;
array([0.255597, 0.182494, 0.863963, 0.240233])
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 2019-02-28 2019-03-31
    cities   &lt;U9 'Giessen'
Attributes:
    Description:  Monthly temperature values for the cities of Marburg, Giess...
    units:        Degrees Celsius
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>or dimension name with label:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_temp</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">cities</span><span class="o">=</span><span class="s">"Marburg"</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'city_temperatures' (time: 4)&gt;
array([0.789925, 0.176441, 0.961369, 0.544981])
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 2019-02-28 2019-03-31
    cities   &lt;U9 'Marburg'
Attributes:
    Description:  Monthly temperature values for the cities of Marburg, Giess...
    units:        Degrees Celsius
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>The last two selection methods work for <code class="highlighter-rouge">Datasets</code> too.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">cities</span><span class="o">=</span><span class="s">"Marburg"</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (time: 10)
Coordinates:
  * time           (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
    cities         &lt;U9 'Marburg'
Data variables:
    Temperature    (time) float64 0.7899 0.1764 0.9614 0.545 ... nan nan nan nan
    Precipitation  (time) float64 nan nan nan nan ... 0.7823 0.425 0.381 0.3304
Attributes:
    Description:  Measurements of Temperature and Precipitation
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>The <code class="highlighter-rouge">sel</code> selection methods accept an additional parameter <code class="highlighter-rouge">method</code> which you can use to do inexact nearest-neighbour lookups.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="p">[</span><span class="s">"time"</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'time' (time: 10)&gt;
array(['2018-12-31T00:00:00.000000000', '2019-01-31T00:00:00.000000000',
       '2019-02-28T00:00:00.000000000', '2019-03-31T00:00:00.000000000',
       '2019-06-30T00:00:00.000000000', '2019-07-31T00:00:00.000000000',
       '2019-08-31T00:00:00.000000000', '2019-09-30T00:00:00.000000000',
       '2019-10-31T00:00:00.000000000', '2019-11-30T00:00:00.000000000'],
      dtype='datetime64[ns]')
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="s">"2019-05-15"</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">"nearest"</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (cities: 3)
Coordinates:
    time           datetime64[ns] 2019-03-31
  * cities         (cities) &lt;U9 'Marburg' 'Giessen' 'Frankfurt'
Data variables:
    Temperature    (cities) float64 0.545 0.2402 0.998
    Precipitation  (cities) float64 nan nan nan
Attributes:
    Description:  Measurements of Temperature and Precipitation
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>When we use the slice function we don’t need the method keyword because sliceing already returns all values inside the range (inclusive).</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="s">"2019-01-05"</span><span class="p">,</span> <span class="s">"2019-05-25"</span><span class="p">),</span> <span class="n">cities</span><span class="o">=</span><span class="s">"Marburg"</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (time: 3)
Coordinates:
  * time           (time) datetime64[ns] 2019-01-31 2019-02-28 2019-03-31
    cities         &lt;U9 'Marburg'
Data variables:
    Temperature    (time) float64 0.1764 0.9614 0.545
    Precipitation  (time) float64 nan nan nan
Attributes:
    Description:  Measurements of Temperature and Precipitation
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>In addition to these basic selection methods there are more advanced methods available for example masking or vectorized indexing with <code class="highlighter-rouge">DataArrays</code> which you can read about in the <a href="https://xarray.pydata.org/en/stable/indexing.html#">documentation</a></p>

</div>

<div class="markdown_area ">
  <!--<div class="task ">
</div>-->

  <div class="alert task">

    <h4 id="task-4"><strong>Task</strong></h4>

    <ol>
      <li>Select the daily maximum Temperature (TXK) and daily minimum temperature (TNK) from the dataset.</li>
      <li>Select january and february of 2018</li>
    </ol>

  </div>

</div>

<div class="markdown_area ">
  <!--<div class="solution ">
</div>-->

  <div class="alert solution">

    <h4 id="solution-4"><strong>Solution</strong></h4>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kt_ds</span><span class="p">[[</span><span class="s">" TNK"</span><span class="p">,</span> <span class="s">" TXK"</span><span class="p">]]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">MESS_DATUM</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="s">"2018-01"</span><span class="p">,</span> <span class="s">"2018-02"</span><span class="p">))</span>
</code></pre></div>    </div>

  </div>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="computations">Computations</h3>

  <p>All numpy ufuncs are supported for calculations on <code class="highlighter-rouge">DataArray</code>s.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_temp</span> <span class="o">*</span> <span class="mi">5</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'city_temperatures' (time: 4, cities: 3)&gt;
array([[0.274978, 2.488622, 0.543809],
       [4.533496, 4.320922, 2.309751],
       [0.813752, 4.392957, 1.138813],
       [2.241172, 0.870248, 1.031211]])
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 2019-02-28 2019-03-31
  * cities   (cities) &lt;U9 'Marburg' 'Giessen' 'Frankfurt'
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">city_precip</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'city_precipitation' (time: 6, cities: 3)&gt;
array([[1.130138, 1.583483, 1.59783 ],
       [1.083835, 1.505042, 1.058204],
       [1.231393, 2.009836, 1.469973],
       [1.319417, 1.066185, 2.529094],
       [1.164983, 1.353107, 1.093537],
       [1.831109, 2.469384, 2.436273]])
Coordinates:
  * time     (time) datetime64[ns] 2019-06-30 2019-07-31 ... 2019-11-30
  * cities   (cities) &lt;U9 'Marburg' 'Giessen' 'Frankfurt'
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Arithmetic operations on <code class="highlighter-rouge">Dataset</code>s automatically loop over all variables</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span> <span class="o">&gt;</span> <span class="mf">0.5</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (cities: 3, time: 10)
Coordinates:
  * cities         (cities) &lt;U9 'Marburg' 'Giessen' 'Frankfurt'
  * time           (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
Data variables:
    Temperature    (time, cities) bool False False False ... False False False
    Precipitation  (time, cities) bool False False False ... True True True
Attributes:
    Description:  Measurements of Temperature and Precipitation
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Similar to numpy you can do aggregations but instead of supplying an index for <code class="highlighter-rouge">axis</code> you can use dimension names directly.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s">"time"</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (cities: 3)
Coordinates:
  * cities         (cities) &lt;U9 'Marburg' 'Giessen' 'Frankfurt'
Data variables:
    Temperature    (cities) float64 0.3932 0.6036 0.2512
    Precipitation  (cities) float64 0.241 0.4728 0.4697
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="timeseries">Timeseries</h3>

  <p>As seen above xarray supports indexing with datetimes. Moreover similar to pandas using the <code class="highlighter-rouge">.dt</code> datetime accessor datetime components can easily be accessed.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'month' (time: 10)&gt;
array([12,  1,  2,  3,  6,  7,  8,  9, 10, 11])
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Additionally these datetime components can also be used as “virtual coordinates” (again similar to pandas with the addition that xarray also implements “seasons”).</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="p">[</span><span class="s">"time.month"</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'month' (time: 10)&gt;
array([12,  1,  2,  3,  6,  7,  8,  9, 10, 11])
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="p">[</span><span class="s">"time.season"</span><span class="p">]</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray 'season' (time: 10)&gt;
array(['DJF', 'DJF', 'DJF', 'MAM', 'JJA', 'JJA', 'JJA', 'SON', 'SON', 'SON'],
      dtype='&lt;U3')
Coordinates:
  * time     (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="groupby">GroupBy</h3>

  <p>Aggregation in combination with “group by” operations similar to pandas make it easy to do complex analysis. If combined with the above datetime functionality we can do aggregations like the following:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">season_mean</span> <span class="o">=</span> <span class="n">city_ds</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">"time.season"</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s">"time"</span><span class="p">)</span>
<span class="n">season_mean</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (cities: 3, season: 4)
Coordinates:
  * cities         (cities) &lt;U9 'Marburg' 'Giessen' 'Frankfurt'
  * season         (season) object 'DJF' 'JJA' 'MAM' 'SON'
Data variables:
    Temperature    (season, cities) float64 0.6426 0.434 0.1258 ... nan nan nan
    Precipitation  (season, cities) float64 nan nan nan ... 0.3788 0.4617 0.5453
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="task ">
</div>-->

  <div class="alert task">

    <h4 id="task-5"><strong>Task</strong></h4>

    <ol>
      <li>Calculate monthly means for the the year 2018 for same variables of task 2.</li>
      <li>Go to the <a href="https://xarray.pydata.org/en/stable/index.html">xarray</a> documentation and find out about the plotting functionality. Make a quick plot of the monthly means of the Temperature.</li>
    </ol>

  </div>

</div>

<div class="markdown_area ">
  <!--<div class="solution ">
</div>-->

  <div class="alert solution">

    <h4 id="solution-5"><strong>Solution</strong></h4>

    <p>Calculate the means</p>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kt_mean</span> <span class="o">=</span> <span class="n">kt_ds</span><span class="p">[[</span><span class="s">" TNK"</span><span class="p">,</span> <span class="s">" TXK"</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">"MESS_DATUM.month"</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s">"MESS_DATUM"</span><span class="p">)</span>
</code></pre></div>    </div>

    <p>Unfortunatelly the thin wrapper xarray has around matplotlib does not support plotting a dataset directly as a facet grid so we plot each variable separately to get a quick impression of what the data looks like.</p>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kt_mean</span><span class="p">[</span><span class="s">" TNK"</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">"month"</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s">"STATIONS_ID"</span><span class="p">)</span>
<span class="n">kt_mean</span><span class="p">[</span><span class="s">" TXK"</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">"month"</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s">"STATIONS_ID"</span><span class="p">)</span>
</code></pre></div>    </div>

  </div>

</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="conversion-to-dataframe">Conversion to dataframe</h3>

  <p>In addition to the conversion from xarray also implements function to convert <code class="highlighter-rouge">Dataset</code>s back to pandas dataframes:</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div class="output output_html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Temperature</th>
      <th>Precipitation</th>
    </tr>
    <tr>
      <th>cities</th>
      <th>time</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">Marburg</th>
      <th>2018-12-31</th>
      <td>0.054996</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-01-31</th>
      <td>0.906699</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-02-28</th>
      <td>0.162750</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-03-31</th>
      <td>0.448234</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-30</th>
      <td>NaN</td>
      <td>0.12234</td>
    </tr>
  </tbody>
</table>
</div>
</div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="writing-data-toreading-data-from-disk">Writing data to/reading data from disk</h3>

  <p>xarray supports writing to many different formats for example netcdf.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_ds</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="s">"output/city_measurements.nc"</span><span class="p">)</span>
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Compatible files can be read from disk. Notice that xarray properly encoded the time dimension during writing and decodes them automatically again when reading.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">new_ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s">"output/city_measurements.nc"</span><span class="p">)</span>
<span class="n">new_ds</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (cities: 3, time: 10)
Coordinates:
  * time           (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
  * cities         (cities) object 'Marburg' 'Giessen' 'Frankfurt'
Data variables:
    Temperature    (time, cities) float64 ...
    Precipitation  (time, cities) float64 ...
Attributes:
    Description:  Measurements of Temperature and Precipitation
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="reading-multiple-files">Reading multiple files</h3>

  <p>If you have multiple large files, for example one for every month, like below</p>

</div>

<div class="language-bash input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code>%%bash
<span class="nb">ls </span>output/multiple
</code></pre></div></div>

<div class="output output_stream highlighter-rouge"><div class="highlight"><pre class="highlight"><code>city_measurements_201812.nc
city_measurements_201901.nc
city_measurements_201902.nc
city_measurements_201903.nc
city_measurements_201906.nc
city_measurements_201907.nc
city_measurements_201908.nc
city_measurements_201909.nc
city_measurements_201910.nc
city_measurements_201911.nc

</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>There is no need to write loops for reading and concatenating the files. xarray encourages the use of the inbuilt function <code class="highlighter-rouge">open_mfdataset</code>.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">t</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_mfdataset</span><span class="p">(</span><span class="s">"output/multiple/*.nc"</span><span class="p">,</span> <span class="n">concat_dim</span><span class="o">=</span><span class="s">"time"</span><span class="p">)</span>
<span class="n">t</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (cities: 3, time: 10)
Coordinates:
  * cities         (cities) object 'Marburg' 'Giessen' 'Frankfurt'
  * time           (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
Data variables:
    Temperature    (time, cities) float64 dask.array&lt;shape=(10, 3), chunksize=(1, 3)&gt;
    Precipitation  (time, cities) float64 dask.array&lt;shape=(10, 3), chunksize=(1, 3)&gt;
Attributes:
    Description:  Measurements of Temperature and Precipitation
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <h3 id="dask">Dask</h3>

  <p>On the last slide the print out of the dataset looked different from the output when we open a single dataset(notice the <code class="highlighter-rouge">dask.array</code> in the print out of the second dataset).</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">new_ds</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (cities: 3, time: 10)
Coordinates:
  * time           (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
  * cities         (cities) object 'Marburg' 'Giessen' 'Frankfurt'
Data variables:
    Temperature    (time, cities) float64 ...
    Precipitation  (time, cities) float64 ...
Attributes:
    Description:  Measurements of Temperature and Precipitation
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">t</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (cities: 3, time: 10)
Coordinates:
  * cities         (cities) object 'Marburg' 'Giessen' 'Frankfurt'
  * time           (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
Data variables:
    Temperature    (time, cities) float64 dask.array&lt;shape=(10, 3), chunksize=(1, 3)&gt;
    Precipitation  (time, cities) float64 dask.array&lt;shape=(10, 3), chunksize=(1, 3)&gt;
Attributes:
    Description:  Measurements of Temperature and Precipitation
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>The reason is that the function to load multiple datasets uses <strong><a href="https://dask.org/">Dask</a></strong> in the background.</p>

  <p>Therefore instead of a normal array you get a Dask array. As they say on the website “Dask provides advanced parallelism for analytics…”. Meaning by xarray being able to use dask in the background you can easily achieve parallelism and analyze datasets which are to big for memory.</p>

  <p>Dask uses chunks for that. Each chunk in this case being a separate array which only gets loaded (lazy loading) when it is needed by a computation (lazy evaluation) or requested by the user.</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">t</span>
</code></pre></div></div>

<div class="output output_data_text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.Dataset&gt;
Dimensions:        (cities: 3, time: 10)
Coordinates:
  * cities         (cities) object 'Marburg' 'Giessen' 'Frankfurt'
  * time           (time) datetime64[ns] 2018-12-31 2019-01-31 ... 2019-11-30
Data variables:
    Temperature    (time, cities) float64 dask.array&lt;shape=(10, 3), chunksize=(1, 3)&gt;
    Precipitation  (time, cities) float64 dask.array&lt;shape=(10, 3), chunksize=(1, 3)&gt;
Attributes:
    Description:  Measurements of Temperature and Precipitation
</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="">
</div>-->

  <p>Unfortunately we don’t have time to cover Dask functionallity but for the basic things we don’t need to know much about how Dask works since xarray can use it in the background without us noticing.</p>

  <h4 id="performance-example">Performance example</h4>

  <p>Without Dask</p>

</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">array1</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">),</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s">"place"</span><span class="p">,</span> <span class="s">"time"</span><span class="p">])</span>

<span class="o">%</span><span class="n">time</span> <span class="n">_</span> <span class="o">=</span> <span class="n">array1</span><span class="o">.</span><span class="nb">sum</span><span class="p">(</span><span class="s">"time"</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_stream highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CPU times: user 227 ms, sys: 286 ms, total: 512 ms
Wall time: 513 ms

</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">chunked1</span> <span class="o">=</span> <span class="n">array1</span><span class="o">.</span><span class="n">chunk</span><span class="p">({</span><span class="s">"place"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="n">chunked1</span><span class="p">)</span>

<span class="o">%</span><span class="n">time</span> <span class="n">_</span> <span class="o">=</span> <span class="n">chunked1</span><span class="o">.</span><span class="nb">sum</span><span class="p">(</span><span class="s">"time"</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</code></pre></div></div>

<div class="output output_stream highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;xarray.DataArray (place: 1000, time: 100000)&gt;
dask.array&lt;shape=(1000, 100000), dtype=float64, chunksize=(10, 100000)&gt;
Dimensions without coordinates: place, time
CPU times: user 771 ms, sys: 37.8 ms, total: 809 ms
Wall time: 348 ms

</code></pre></div></div>

<div class="markdown_area ">
  <!--<div class="task ">
</div>-->

  <div class="alert task">

    <h2 id="exercise-5">Exercise 5</h2>

    <ul>
      <li>Complete the fifth assignment and push your results until tuesday 14:00 next week</li>
      <li>Assignment link: <a href="https://classroom.github.com/a/OjslpEAv">https://classroom.github.com/a/OjslpEAv</a></li>
    </ul>

  </div>

</div>


              <nav class="c-page__nav">
  
    
    <a id="js-page__nav__prev" class="c-page__nav__prev" href="/sommersemester_2019/units/S01E04">
      〈 <span class="u-margin-right-tiny"></span> Data science I
    </a>
  

  
    
    <a id="js-page__nav__next" class="c-page__nav__next" href="/sommersemester_2019/units/S01E06">
      Remote Sensing I <span class="u-margin-right-tiny"></span> 〉
    </a>
  
</nav>

            </div>
          </div>
        </div>
      </main>
    </div>

  </body>
</html>
